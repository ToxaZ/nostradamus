{% extends 'base.html' %}
{% load humanize %}

{% block breadcrumb %}
  <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a>
  <li class="breadcrumb-item"><a href="{% url 'predictions:predictions_index' %}">Predictions</a></li>
  <li class="breadcrumb-item"> <a href="{% url 'predictions:single_coef' match.match_id %}"> {{ match }} </a></li>
  <li class="breadcrumb-item active">New prediction</li>
{% endblock %}

{% block content %}
  <table>
      <tr>
        <td> Home win: {{ score_coef.home_win }} </td>
        <td> Tie: {{ score_coef.tie }} </td>
        <td> Guest win: {{ score_coef.guest_win }} </td>
      </tr>
  </table>

  <table>
    {% for key, value in score_coef.score.items %}
      <tr>
        <td> {{ key }}: </td>
        <td> {{ value }} </td>
      </tr>
    {% endfor %}
  </table>

  {% if match.start_time > cur_time %}
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="btn btn-success">Predict</button>
    </form>
  {% else %}
    No more predictions available
  {% endif %}
  Previous predictions:
  {% if user_predictions %}
  {% for prediction in user_predictions %}
    <div class="card-body p-3">
      <div class="row mb-3">
        <div class="col-6">
            {{ prediction.match_id.home_team }}
          <strong class="text-muted">{{ prediction.home_score }} â€” {{ prediction.guest_score }}</strong>
            {{ prediction.match_id.guest_team }}
          <br>
          <small class="text-muted">{{ prediction.submit_time|naturaltime }}</small>
        </div>
      </div>
    </div>
  {% endfor %}
    {% else %}
    no predictions
  {% endif %}

{% endblock %}
