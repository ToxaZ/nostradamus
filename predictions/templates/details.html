{% extends 'base.html' %}
{% load humanize %}

{% block breadcrumb %}
  <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a>
  <li class="breadcrumb-item"><a href="{% url 'predictions:predictions_index' %}">Predictions</a></li>
  <li class="breadcrumb-item active"> <a href="{% url 'predictions:details' match.match_id %}"> {{ match }} </a></li>
{% endblock %}

{% block content %}
  {% if match.status == "SCHEDULED" %}
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="btn btn-success">Predict</button>
    </form>
  {% else %}
    No more predictions available
  {% endif %}
  Previous predictions:
  {% if user_predictions %}
  {% for prediction in user_predictions %}
    <div class="card-body p-3">
      <div class="row mb-3">
        <div class="col-6">

          <strong class="text-muted">{{ prediction }}</strong>
          <br>
          <small class="text-muted">{{ prediction.submit_time|naturaltime }}</small>
        </div>
      </div>
    </div>
  {% endfor %}
    {% else %}
    no predictions
  {% endif %}

<div class="container">
    <div class="row">
      <div class="col">
    <table class="table table-borderless">
      <thead class="table-light">
      <th scope="col">Home win</th>
      {% if match.is_playoff %}
        <th scope="col">Tie, Home win</th>
        <th scope="col">Tie, Guest win</th>
      {% else %}
        <th scope="col">Tie</th>
      {% endif %}
      <th scope="col">Guest win</th>
    </thead>
      <tr>
        <td> {{ score_coef.home_win }} </td>
        {% if match.is_playoff %}
          <td> {{ score_coef.tie_home_win }} </td>
          <td> {{ score_coef.tie_guest_win }} </td>
        {% else %}
          <td> {{ score_coef.tie }} </td>
        {% endif %}
        <td> {{ score_coef.guest_win }} </td>
      </tr>
  </table>
 </div>
      <div class="col">
        <div class="row">
          <div class="col">

  <table class="table table-borderless">
    <thead class="table-light">
      <th scope="col">Score</th>
      <th scope="col">Points</th>
    </thead>
    {% for key, value in score_coef.score.items %}
      <tr>
        <td> {{ key }}: </td>
        <td> {{ value }} </td>
      </tr>
    {% endfor %}
  </table>
            </div>
        </div>

{% endblock %}
